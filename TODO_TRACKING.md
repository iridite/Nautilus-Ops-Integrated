# TODO 跟踪清单

生成时间: 2026-02-19
更新时间: 2026-02-19 (RSI Watcher 验证完成)

## 统计

- **总计**: 2 个 TODO
- **高优先级**: 0 个
- **中优先级**: 0 个
- **低优先级**: 2 个

---

## 💡 低优先级（长期优化）

### 1. 部分止盈功能
- **文件**: `strategy/keltner_rs_breakout.py:874`
- **问题**: 当前只能全部平仓，无法实现部分止盈
- **方案**: 实现部分平仓功能，例如止盈一半仓位
- **预估时间**: 1-2 小时
- **状态**: [ ] 待处理
- **备注**: 需要考虑仓位管理和风险计算的调整

### 2. 基于 initial_risk 的止损计算方式（可选）
- **文件**: `strategy/keltner_rs_breakout.py:894`
- **问题**: 当前使用 ATR 方式计算止损，还有基于 initial_risk 的计算方式未实现
- **方案**: 评估两种方式的优劣，考虑是否需要支持多种止损计算方式
- **预估时间**: 2-3 小时（包括回测验证）
- **状态**: [ ] 待处理
- **备注**: 可能需要添加配置选项让用户选择止损计算方式

---

## ✅ 已完成

### 1. RSI Watcher 参数独立化验证 ✅
- **完成时间**: 2026-02-19
- **结论**: **问题不存在** - 架构已经保证状态隔离
- **详情**: 
  - Backtest 和 Sandbox 引擎都为每个币种创建独立的策略实例
  - 每个实例有自己的 `self.rsi_watcher` 状态变量
  - 不存在多币种状态混淆问题
  - 已移除误导性的 WIP 和 TODO 注释
  - 所有 118 个测试通过

### 2. 全局 Decimal 精度配置 ✅
- **完成时间**: 2026-02-19
- **结论**: 已在使用中
- **详情**: 
  - `config/constants.py` 中已定义 `TARGET_PRECISION_DECIMALS = 16`
  - 策略代码中已使用 `TARGET_PRECISION` 进行精度控制
  - 添加注释说明配置位置

---

## 实施建议

### 短期优化（本月）
1. **部分止盈功能** - 增强策略灵活性，允许分批止盈

### 长期规划（季度）
1. **多种止损计算方式** - 需要充分回测验证，评估是否真正需要

---

## 注意事项

- 所有 TODO 都在 `strategy/keltner_rs_breakout.py` 文件中
- 剩余的 TODO 都是功能增强，不影响当前策略运行
- 建议在完成每个 TODO 后运行完整的测试套件
- RSI Watcher 功能已验证正确，可以安全启用 `enable_rsi_stop_loss: true`
