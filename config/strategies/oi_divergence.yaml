# OI背离策略配置
# 持仓量背离策略 (风控增强版 v3.0)

name: "OIDivergenceStrategy"
module_path: "strategy.oi_divergence"
config_class: "OIDivergenceStrategyConfig"

# 策略参数
parameters:
  # 简化配置字段
  symbol: "" # 由系统自动填充
  timeframe: "" # 由系统自动填充
  price_type: "LAST"
  origination: "EXTERNAL"

  # 时间框架依赖：需要主时间框架和趋势时间框架
  timeframes: ["main", "trend"]

  # Research 参数 (策略核心逻辑)
  lookback_bars: 48 # 48小时回溯期计算支撑/阻力
  oi_lookback: 12 # OI移动平均周期12小时
  oi_decline_threshold: 0.02 # OI下降2%触发背离信号（优化后）
  funding_rate_threshold_annual: 15.0 # 年化资金费率15%以上表示拥挤（优化后）
  use_funding_filter: true # 启用资金费率过滤
  breakout_reentry_pct: 0.002 # 回撤0.2%进入

  # 出场参数
  tp_use_vwap: true # 止盈目标使用VWAP
  vwap_period: 48 # VWAP周期48小时
  time_stop_bars: 24 # 时间止损24小时

  # 风险管理 - ATR动态止损
  use_atr_stop: true # 启用ATR动态止损
  atr_period: 14 # ATR计算周期
  atr_stop_multiplier: 2.0 # ATR止损倍数 (2× ATR)
  stop_loss_pct: 0.01 # 固定止损1% (ATR未初始化时的后备)

  # 风险管理 - ATR动态仓位管理
  use_atr_position_sizing: true # 启用ATR动态仓位
  max_position_risk_pct: 0.1 # 单笔最大风险10%账户权益

  # 滑点控制
  max_slippage_pct: 0.005 # 最大允许滑点0.5%
  enable_slippage_alert: true # 启用滑点告警

  # 仓位控制
  max_positions: 1 # 最大持仓数
  qty_percent: 0.1 # 默认仓位10% (ATR仓位未启用时使用)
  leverage: 1 # 默认杠杆倍数

  # 日志控制
  enable_signal_logging: true # 启用详细信号日志
  enable_quality_check: true # 启用数据质量检查
