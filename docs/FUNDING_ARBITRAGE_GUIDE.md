# èµ„é‡‘è´¹ç‡å¥—åˆ©ç­–ç•¥ - ä¸€é”®åˆ†æå·¥å…·

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆæ¨èï¼‰

```bash
# è‡ªåŠ¨åˆ†æ BTC, ETH, SOL, BNB å››ä¸ªå¸ç§çš„ 2024 å¹´æ•°æ®
uv run python scripts/run_funding_arbitrage_analysis.py
```

è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨å®Œæˆï¼š
1. ä¸‹è½½ 4 ä¸ªå¸ç§çš„ 2024 å…¨å¹´æ•°æ®ï¼ˆç°è´§ã€æ°¸ç»­åˆçº¦ã€èµ„é‡‘è´¹ç‡ï¼‰
2. ä¾æ¬¡è¿è¡Œæ¯ä¸ªå¸ç§çš„å›æµ‹
3. ç”Ÿæˆå®Œæ•´çš„å¯¹æ¯”åˆ†ææŠ¥å‘Š

### æ–¹å¼äºŒï¼šè‡ªå®šä¹‰å¸ç§

```bash
# åªåˆ†æ BTC å’Œ SOL
uv run python scripts/run_funding_arbitrage_analysis.py --symbols BTCUSDT SOLUSDT

# åˆ†ææ›´å¤šå¸ç§
uv run python scripts/run_funding_arbitrage_analysis.py --symbols BTCUSDT ETHUSDT SOLUSDT BNBUSDT ADAUSDT
```

### æ–¹å¼ä¸‰ï¼šè·³è¿‡æ•°æ®ä¸‹è½½ï¼ˆæ•°æ®å·²å­˜åœ¨ï¼‰

```bash
# å‡è®¾æ•°æ®å·²ç»ä¸‹è½½è¿‡ï¼Œç›´æ¥è¿è¡Œå›æµ‹
uv run python scripts/run_funding_arbitrage_analysis.py --skip-download
```

## è¾“å‡ºç»“æœ

è¿è¡Œå®Œæˆåï¼Œä¼šç”Ÿæˆï¼š

1. **æ§åˆ¶å°è¾“å‡º**ï¼šæ¯ä¸ªå¸ç§çš„å›æµ‹æ‘˜è¦
2. **CSV æ–‡ä»¶**ï¼š`output/backtest/comparison.csv` - å®Œæ•´çš„å¯¹æ¯”è¡¨æ ¼
3. **JSON æ–‡ä»¶**ï¼š`output/backtest/result/*.json` - æ¯ä¸ªå¸ç§çš„è¯¦ç»†ç»“æœ

## ç¤ºä¾‹è¾“å‡º

```
====================================================================================================
ğŸ“Š èµ„é‡‘è´¹ç‡å¥—åˆ©ç­–ç•¥ - 2024 å…¨å¹´å›æµ‹ç»“æœå¯¹æ¯”
====================================================================================================

     å¸ç§  åˆå§‹èµ„é‡‘ (USDT)  å¼•æ“ PnL (USDT)  èµ„é‡‘è´¹ç‡æ”¶ç›Š (USDT)  çœŸå® PnL (USDT)  æ”¶ç›Šç‡ (%)  è®¢å•æ•°  æŒä»“æ•°
SOLUSDT     100000.0        -968.91       12254.47       11285.57    11.29   48   48
BNBUSDT     100000.0       -2055.43        5353.23        3297.81     3.30  100  100
BTCUSDT     100000.0        -240.33        3139.23        2898.90     2.90   12   12

====================================================================================================
âœ… å¯¹æ¯”è¡¨æ ¼å·²ä¿å­˜: output/backtest/comparison.csv
====================================================================================================

ğŸ” å…³é”®å‘ç°:
  â€¢ æœ€ä½³è¡¨ç°: SOLUSDT (+11.29%)
  â€¢ æœ€å·®è¡¨ç°: BTCUSDT (+2.9%)
  â€¢ å¹³å‡æ”¶ç›Šç‡: 5.83%
  â€¢ æ€»èµ„é‡‘è´¹ç‡æ”¶ç›Š: 20746.93 USDT
```

## ç»“æœè§£è¯»

### å…³é”®æŒ‡æ ‡è¯´æ˜

- **å¼•æ“ PnL**ï¼šä¹°å–ä»·å·®å’Œæ‰‹ç»­è´¹çš„å‡€æŸç›Šï¼ˆé€šå¸¸ä¸ºè´Ÿï¼Œå› ä¸ºæ‰‹ç»­è´¹ï¼‰
- **èµ„é‡‘è´¹ç‡æ”¶ç›Š**ï¼šæŒæœ‰ç©ºå¤´åˆçº¦æ”¶å–çš„èµ„é‡‘è´¹ç‡ï¼ˆç­–ç•¥çš„ä¸»è¦æ”¶ç›Šæ¥æºï¼‰
- **çœŸå® PnL**ï¼šå¼•æ“ PnL + èµ„é‡‘è´¹ç‡æ”¶ç›Šï¼ˆç­–ç•¥çš„å®é™…ç›ˆäºï¼‰
- **æ”¶ç›Šç‡**ï¼šçœŸå® PnL / åˆå§‹èµ„é‡‘ Ã— 100%

### ç­–ç•¥é€»è¾‘

1. **Delta ä¸­æ€§å¯¹å†²**ï¼šåŒæ—¶åšå¤šç°è´§ + åšç©ºæ°¸ç»­åˆçº¦
2. **æ”¶ç›Šæ¥æº**ï¼šæ”¶å–æ­£èµ„é‡‘è´¹ç‡ï¼ˆç©ºå¤´æ”¶å–ï¼Œå¤šå¤´æ”¯ä»˜ï¼‰
3. **é£é™©æ§åˆ¶**ï¼š
   - æœ€å°æŒä»“æœŸï¼š30 å¤©ï¼ˆé¿å…é¢‘ç¹äº¤æ˜“ï¼‰
   - æœ€å¤§æŒä»“æœŸï¼š90 å¤©ï¼ˆé¿å…é•¿æœŸå ç”¨èµ„é‡‘ï¼‰
   - è´Ÿèµ„é‡‘è´¹ç‡é˜ˆå€¼ï¼šè¿ç»­ 3 æ¬¡è´Ÿè´¹ç‡åˆ™å¹³ä»“

## 2024 å¹´å›æµ‹ç»“æœåˆ†æ

### è¡¨ç°æ’å

1. **SOL (11.29%)** - æœ€ä½³è¡¨ç°
   - èµ„é‡‘è´¹ç‡æ”¶ç›Šï¼š12,254 USDT
   - äº¤æ˜“æ¬¡æ•°ï¼š48 æ¬¡
   - ç‰¹ç‚¹ï¼šé«˜èµ„é‡‘è´¹ç‡ï¼Œäº¤æ˜“æœºä¼šå¤š

2. **BNB (3.30%)** - ä¸­ç­‰è¡¨ç°
   - èµ„é‡‘è´¹ç‡æ”¶ç›Šï¼š5,353 USDT
   - äº¤æ˜“æ¬¡æ•°ï¼š100 æ¬¡
   - ç‰¹ç‚¹ï¼šäº¤æ˜“é¢‘ç¹ï¼Œä½†å•æ¬¡æ”¶ç›Šè¾ƒä½

3. **BTC (2.90%)** - ä¿å®ˆè¡¨ç°
   - èµ„é‡‘è´¹ç‡æ”¶ç›Šï¼š3,139 USDT
   - äº¤æ˜“æ¬¡æ•°ï¼š12 æ¬¡
   - ç‰¹ç‚¹ï¼šäº¤æ˜“æœºä¼šå°‘ï¼Œä½†ç¨³å®š

### å…³é”®å‘ç°

- **å¹³å‡æ”¶ç›Šç‡**ï¼š5.83%ï¼ˆå¹´åŒ–ï¼‰
- **æ€»èµ„é‡‘è´¹ç‡æ”¶ç›Š**ï¼š20,747 USDTï¼ˆä¸‰ä¸ªå¸ç§åˆè®¡ï¼‰
- **æœ€ä½³ç­–ç•¥**ï¼šSOL çš„æ”¶ç›Šç‡æ˜¯ BTC çš„ 3.9 å€

## é«˜çº§ç”¨æ³•

### å•ç‹¬è¿è¡ŒæŸä¸ªæ­¥éª¤

```bash
# 1. åªä¸‹è½½æ•°æ®
uv run python scripts/download_full_year_data.py --symbols BTCUSDT --year 2024

# 2. åªè¿è¡Œå›æµ‹ï¼ˆéœ€è¦å…ˆæ‰‹åŠ¨æ›´æ–°é…ç½®æ–‡ä»¶ï¼‰
uv run python main.py backtest --type low --env funding_test

# 3. åªç”Ÿæˆå¯¹æ¯”æŠ¥å‘Šï¼ˆåŸºäºå·²æœ‰çš„å›æµ‹ç»“æœï¼‰
uv run python scripts/generate_comparison.py
```

### æ‰¹é‡å›æµ‹å·¥å…·

```bash
# ä½¿ç”¨æ‰¹é‡å›æµ‹å·¥å…·ï¼ˆæ›´çµæ´»çš„é…ç½®ï¼‰
uv run python scripts/batch_backtest.py --symbols BTCUSDT SOLUSDT --year 2024 --skip-download
```

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸‹è½½**ï¼šé¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½æ•°æ®ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ
2. **API é™æµ**ï¼šBinance API æœ‰é€Ÿç‡é™åˆ¶ï¼Œè„šæœ¬å·²è‡ªåŠ¨å¤„ç†
3. **ç£ç›˜ç©ºé—´**ï¼šæ¯ä¸ªå¸ç§çº¦ 1-2 MB æ•°æ®
4. **å›æµ‹æ—¶é—´**ï¼šæ¯ä¸ªå¸ç§çº¦ 10-30 ç§’

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ•°æ®ä¸‹è½½å¤±è´¥

```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.binance.com

# æ‰‹åŠ¨ä¸‹è½½å•ä¸ªå¸ç§
uv run python scripts/download_full_year_data.py --symbols BTCUSDT --year 2024
```

### é—®é¢˜ï¼šå›æµ‹å¤±è´¥

```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -lh data/raw/BTCUSDT/
ls -lh data/raw/BTCUSDT-PERP/

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
uv run python main.py backtest --type low --env funding_test 2>&1 | tee backtest.log
```

### é—®é¢˜ï¼šé…ç½®æ–‡ä»¶é”™è¯¯

```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat config/strategies/funding_arbitrage.yaml
cat config/environments/funding_test.yaml
```

## ç›¸å…³æ–‡ä»¶

- `scripts/run_funding_arbitrage_analysis.py` - ä¸€é”®åˆ†æå·¥å…·ï¼ˆä¸»å…¥å£ï¼‰
- `scripts/batch_backtest.py` - æ‰¹é‡å›æµ‹å·¥å…·
- `scripts/generate_comparison.py` - å¯¹æ¯”æŠ¥å‘Šç”Ÿæˆå™¨
- `scripts/download_full_year_data.py` - æ•°æ®ä¸‹è½½å·¥å…·
- `config/strategies/funding_arbitrage.yaml` - ç­–ç•¥é…ç½®
- `config/environments/funding_test.yaml` - ç¯å¢ƒé…ç½®
